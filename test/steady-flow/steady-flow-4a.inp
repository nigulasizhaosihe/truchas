STEADY INVISCID 2-MATERIAL FLOW
-------------------------------
2D rectangular domain (1 cell thick in z) with steady uniform flow directed
along the x-axis. Prescribed inflow velocity on the left and dirichlet pressure
on the right. Two equal-density fluids with planar interface oblique to the
x-axis. Constant initial velocity field consistent with the BC. Velocity should
remain constant. Interface will not be exactly advected due to approximation
errors from Young's method for computing the interface normal adjacent to the
boundary.

This problem is analogous to a pure advection problem, except that instead
of a prescribed constant velocity, we solve for the velocity, expecting to
recovery that constant velocity.

Variations use rotated meshes (and rotated velocity)

&OUTPUTS
  output_t  = 0.0, .0625, 2.0
  output_dt = 0.0625, 2.0
/
A kludge to force hitting the final time exactly
&SIMULATION_CONTROL
  phase_start_times = 2.0
  phase_init_dt_factor = 1.0
/

&MESH
  mesh_file = 'mesh2a.gen'
/

&PHYSICS
  fluid_flow = .false. ! use new flow
/

&FLOW_DRIVER new_driver = .true. /

&FLOW_OPTIONS
  active = .true.
  inviscid = .true.
  courant_number = 0.5
/

TODO: delete this namelist
&FLOW_PREDICTOR
  rel_tol = 1.0e-12
  abs_tol = 0.0
  max_ds_iter = 10
  max_amg_iter = 20
  krylov_method = 'cg'
/

&FLOW_CORRECTOR
  rel_tol = 1.0e-10
  abs_tol = 0.0
  max_ds_iter = 5
  max_amg_iter = 10
  krylov_method = 'cg'
/

&VOLUMETRACKING
  active = t
  nested_dissection = f
  subcycles = 2
/

&NUMERICS
  dt_constant = 0.0625
/

Inlet velocity
&FLOW_BC
  face_sets = 1
  condition = 'velocity dirichlet'
  data = 4.0, 0.0, 0.0
/
&FLOW_BC
  face_sets = 1
  condition = 'pressure neumann'
/

Outlet pressure
&FLOW_BC
  face_sets = 2
  condition = 'pressure dirichlet'
  data = 0.0
/
&FLOW_BC
  face_sets = 2
  condition = 'velocity neumann'
/

Walls
&FLOW_BC
  face_sets = 3, 4, 5
  condition = 'slip'
/

&BODY
  surface_name = 'plane'
  axis = 'x'
  rotation_angle = 0, 0, 26.5650511770780 ! 2:1 slope
  translation_pt = -4.0, 0.0, 0.0
  material_number = 2
  velocity = 4.0, 0.0, 0.0
  temperature = 0.0
/

&INTERFACES
  vof_method = 'divide'
  vof_tolerance = 1.0e-2
/

&BODY
  surface_name = 'background'
  material_number = 1
  velocity = 4.0, 0.0, 0.0
  temperature = 0.0
/

&MATERIAL
  material_name = 'water'
  material_number = 1
  density = 1.0 ! not void
  material_feature = 'background'
 /

&PHASE
  name = 'water'
  property_name(1) = 'density', property_constant(1) = 1.0
  !TODO: delete the viscosity and density deviation properties
  property_name(3) = 'viscosity',     property_constant(3) = 1.0
  property_name(4) = 'density deviation', property_constant(4) = 0.0
/

&MATERIAL_SYSTEM
  name = 'water'
  phases = 'water'
/

&MATERIAL
  material_name = 'oil'
  material_number = 2
  density = 1.0 ! not void
 /

&PHASE
  name = 'oil'
  property_name(1) = 'density', property_constant(1) = 1.0
  !TODO: delete the viscosity and density deviation properties
  property_name(3) = 'viscosity',     property_constant(3) = 1.0
  property_name(4) = 'density deviation', property_constant(4) = 0.0
/

&MATERIAL_SYSTEM
  name = 'oil'
  phases = 'oil'
/
